<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="test.css" type="text/css" media="screen" charset="utf-8">
    <script src="../lib/prototype.js" type="text/javascript" charset="utf-8"></script>
    <script src="lib/unittest.js" type="text/javascript" charset="utf-8"></script>
    <script src="../src/plumb.js" type="text/javascript" charset="utf-8"></script>
    <script src="../src/output.js" type="text/javascript" charset="utf-8"></script>
  </head>
  <body>
    
    <div id="testlog">
    </div>
    
    <script type="text/javascript" charset="utf-8">
    
      Plumb.setup({
        layout: { element: new Element('div'), width: 12 },
        output: { width: 50, margin: 10 }
      });
      
      Cases = [
        [ 280,
          // 50 + 10 + 10
          { stretchy: true, width: 0.33, prepend: 1, append: 0 },
          // 50 + 10 + 10
          { stretchy: true, width: 0.33, prepend: 1, append: 0 },
          // 50 + 10 + 10
          { stretchy: true, width: 0.33, prepend: 1, append: 1 }
          // 50 + 10 + 10
        ],
        
        [ 420,
          // 50 + 10 + 10
          { stretchy: true, width: 0.33, prepend: 1, append: 0 },
          // 50 + 10 + 10
          { stretchy: true, width: 0.33, prepend: 1, append: 0 },
          // 50 + 10 + 10
          { stretchy: true, width: 0.33, prepend: 1, append: 0 },
          // 50 + 10 + 10
          { stretchy: false, width: 1, prepend: 1, append: 1 } // 50
          // 50 + 10 + 10
        ],
        
        [ 280,
          { stretchy: true, width: 0.33, prepend: 1, append: 0 },
          { stretchy: true, width: 0.33, prepend: 1, append: 0 },
          { stretchy: true, width: 0.33, prepend: 1, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 }
        ],
        
        [ 210,
          // 50 + 10 + 10
          { stretchy: true, width: 0.33, prepend: 1, append: 0 },
          // 50 + 10 + 10
          { stretchy: true, width: 0.33, prepend: 1, append: 0 },
          { stretchy: true, width: 0.33, prepend: 0, append: 0 },
          // 10
          { stretchy: false, width: 1, prepend: 0, append: 0 } // 50
          // 10
        ],
        
        [ 270,
          // 50 + 10 + 10
          { stretchy: true, width: 0.33, prepend: 1, append: 0 },
          // 110 + 10 + 10
          { stretchy: true, width: 0.33, prepend: 2, append: 0 },
          { stretchy: true, width: 0.33, prepend: 0, append: 0 },
          // 10
          { stretchy: false, width: 1, prepend: 0, append: 0 } // 50
          // 10
        ],
        
        [ 140,
          // 50 + 10 + 10
          { stretchy: true, width: 0.33, prepend: 1, append: 0 },
          { stretchy: true, width: 0.33, prepend: 0, append: 0 },
          { stretchy: true, width: 0.33, prepend: 0, append: 0 },
          // 10
          { stretchy: false, width: 1, prepend: 0, append: 0 } // 50
          // 10
        ],
        
        [ 210,
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: true, width: 0.5, prepend: 0, append: 0 },
          { stretchy: true, width: 0.5, prepend: 1, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 }
        ],
        
        [ 140,
          // 10
          { stretchy: false, width: 1, prepend: 0, append: 0 }, // 50
          // 10
          { stretchy: true, width: 0.33, prepend: 0, append: 0 },
          { stretchy: true, width: 0.33, prepend: 0, append: 0 },
          { stretchy: true, width: 0.33, prepend: 0, append: 0 },
          // 10
          { stretchy: false, width: 1, prepend: 0, append: 0 } // 50
          // 10
        ],
        
        [ 210,
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: true, width: 0.25, prepend: 0, append: 0 },
          { stretchy: true, width: 0.25, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: true, width: 0.25, prepend: 0, append: 0 },
          { stretchy: true, width: 0.25, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 }
        ],
        
        [ 330,
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: true, width: 0.5, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: true, width: 0.5, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 }
        ],
        
        [ 150,
          { stretchy: true, width: 0.25, prepend: 0, append: 0 },
          { stretchy: true, width: 0.25, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: true, width: 0.25, prepend: 0, append: 0 },
          { stretchy: true, width: 0.25, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 }
        ],
        
        [ 150,
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: true, width: 0.25, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: true, width: 0.75, prepend: 0, append: 0 }
        ],
        
        [ 330,
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: true, width: 0.5, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: true, width: 0.5, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 }
        ],
        
        [ 270,
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: true, width: 0.5, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: true, width: 0.5, prepend: 0, append: 0 }
        ],
        
        [ 210,
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: true, width: 0.5, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: true, width: 0.5, prepend: 0, append: 0 }
        ],
        
        [ 150,
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: true, width: 0.5, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: true, width: 0.5, prepend: 0, append: 0 }
        ],
        
        [ 140,
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: true, width: 0.5, prepend: 0, append: 0 },
          { stretchy: true, width: 0.5, prepend: 0, append: 0 }
        ],
        
        [ 80,
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: true, width: 0.5, prepend: 0, append: 0 },
          { stretchy: true, width: 0.5, prepend: 0, append: 0 }
        ],
        
        [ 20,
          { stretchy: true, width: 0.5, prepend: 0, append: 0 },
          { stretchy: true, width: 0.5, prepend: 0, append: 0 }
        ],
        
        [ 140,
          { stretchy: true, width: 1, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 }
        ],
        
        [ 140,
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: true, width: 1, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 }
        ],
        
        [ 140,
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: true, width: 1, prepend: 0, append: 0 }
        ],
        
        [ 140,
          { stretchy: false, width: 2, prepend: 0, append: 0 },
          { stretchy: true, width: 1, prepend: 0, append: 0 }
        ],
        
        [ 80,
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: true, width: 1, prepend: 0, append: 0 }
        ],
        
        [ 80,
          { stretchy: true, width: 1, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 }
        ],
        
        [ 20,
          { stretchy: true, width: 1, prepend: 0, append: 0 }
        ],
        
        [ 150,
          { stretchy: true, width: 0.5, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: true, width: 0.5, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 }
        ],
        
        [ 220,
          { stretchy: true, width: 0.33333, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: true, width: 0.33333, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: true, width: 0.33333, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 }
        ],
        
        [ 290,
          { stretchy: true, width: 0.25, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: true, width: 0.25, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: true, width: 0.25, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 },
          { stretchy: true, width: 0.25, prepend: 0, append: 0 },
          { stretchy: false, width: 1, prepend: 0, append: 0 }
        ]
      ];
      
      new Test.Unit.Runner({
        testTotalFixedSpace: function() {
          Cases.each(function(c, i) {;
            var expected = c.shift();
            this.assertEqual(expected, Plumb.Output.calculateFixedSpace(c, false), "i = " + i);
          }.bind(this));
        }
      });
      
    </script>
    
  </body>
</html>